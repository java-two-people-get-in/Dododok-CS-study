# [Network] TCP/UDP

## 1. Transport Layer(4계층)

**신뢰성 있고 정확한** 종단간(end to end) 데이터 전송을 담당한다.
→ 상위 계층에서 데이터 전달의 유효성을 고려하지 않을 수 있다.

연결 기반으로 오류검출 및 복구, 흐름제어와 중복검사 등을 수행한다.

- 장비 : 호스트(end, 컴퓨터) with 포트번호
- 데이터 단위 : segment, datagram
- 프로토콜 : TCP, UDP

1. 트랜스포트 계층이 제공할 수 있는 서비스는 **하위 네트워크 계층 프로토콜의 서비스 모델에 의해 제약받는다.**
    
    > 네트워크 계층 프로토콜이 호스트 사이에서 전송되는 트랜스포트 계층 세그먼트에 대한 **지연 보장이나 대역폭 보장**을 제공할 수 없다면,
    > 
    > 
    > 트랜스포트 계층 프로토콜은 프로세스끼리 전송하는 메시지에 대한 지연 보장이나 대역폭 보장을 제공할 수 없다.
    > 
2. 하위 네트워크 프로토콜이 상응하는 서비스를 제공하지 못할 때도, 특정 서비스는 트랜스포트 프로토콜에 의해 제공될 수 있다.
    
    > 하위 네트워크 프로토콜이 비신뢰적일 때, 트랜스포트 계층이 애플리케이션에게 신뢰적인 데이터 전송 서비스를 제공할 수 있다.
    > 
    > 
    > → 하위 계층(네트워크 계층)으로 다시 보내는 것!
    > 

### 다중화(Multiflexing)와 역다중화(Demultiflexing)

소켓은, 네트워크에서 프로세스로 이동하는 통로의 역할이다.

- 멀티플렉싱
    - 송신 측에서 이루어진다.
    - 여러 소켓의 데이터를 처리
    - 전송 계층 헤더를 추가(추후에 역다중화에서 쓰인다)
- 디멀티플렉싱
    - 수신 측에서 이루어진다.
    - 헤더 정보를 사용하여 수신된 세그먼트를 **올바른 소켓으로 전송**

- UDP소켓에서의 적용
    - UDP소켓에서는 대상 ip주소와 대상 포트번호로 구성된 헤더로 식별한다.
- TCP 소켓에서의 적용
    - 대상 ip주소, 대상 포트번호, 출처 ip주소, 출처 포트번호로 식별한다,

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/3a5c6a41-5708-4e9f-b10f-ec80ce93b846/cc08b44d-5cfb-4f6b-9b25-ba2a0225a6a2/Untitled.png)

## 2. TCP

**Transmission Control Protocol, TCP**

- **신뢰적**이고 **연결지향형** 서비스를 제공한다. (reliable data transfer)
- **혼잡 제어**(congestion control) : 혼잡한 네트워크 링크에서 각 TCP 연결이 링크의 대역폭을 공평하게 공유하여 통과하도록 해준다.
- Transport Layer의 전송 단위는 보통 **세그먼트**이고, UDP의 데이터단위는 **데이터그램**이다.

### 2.1. TCP의 특징

- **연결 지향**방식으로 패킷 교환을 사용한다.
→ 3 way handshake를 이용하여 연결하고, 4 way handshake를 이용하여 해제한다.
- **흐름제어** 및 **혼잡제어**를 제공한다.
- 신뢰적인 전송을 제공한다.(세그먼트의 순서를 보장하고, 중복 패킷을 파악하고, 손실을 감지하여 재요청할 수 있다.)
→ UDP에 비해서 느리다.

### 2.2. TCP 흐름제어

- **슬라이딩 윈도우 (Sliding Window)**: 송신 측과 수신 측은 서로의 버퍼 크기를 조정해 데이터가 한꺼번에 너무 많이 전송되지 않도록 조절해. 이를 통해 수신 측의 버퍼 오버플로우를 방지할 수 있어.

### 2.3 TCP 혼잡제어

- **혼잡 제어 알고리즘**: 네트워크 혼잡을 감지하고 이를 완화하기 위한 다양한 알고리즘을 사용해. 예를 들어, 혼잡이 감지되면 전송 속도를 줄이는 등의 조치를 취해 네트워크의 안정성을 높여.

미안얘들아좀이따마저공부할게
