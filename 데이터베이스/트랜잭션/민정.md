# [데이터베이스] 트랜잭션

## 트랜잭션(Transaction)
데이터베이스의 상태를 변화시키는 작업의 단위이다.

데이터베이스의 상태를 변화시킨다는 의미는 SELECT,INSERT,UPDATE,DELETE 등과 같은 데이터베이스 조작어(DML)사용하는 것을 의미한다.

## 트랜잭션을 사용하는 이유
* 데이터베이스에서 데이터를 다룰 때 장애가 일어나는 경우가 있다. 트랜잭션은 장애 발생시 데이터를 복구하는 작업의 단위가 된다.
* 데이터베이스에서 여러 작업이 동시에 같은 데이터를 다룰 때가 있다. 트랜잭션은 이 작업을 서로 분리하는 단위가 된다.

## 트랜잭션 수행 과정
![image](https://github.com/user-attachments/assets/8b16096d-e703-4dbd-8d18-03a945122ba9)

데이터베이스의 데이터는 하드디스크에 저장되어 있고, 처리를 위해서는 반드시 주기억장치 버퍼로 사본을 읽어와야 한다.

## 트랜잭션의 4가지 성질 : ACID
트랜잭션은 데이터베이스의 무결성을 유지하기 위해 원자성, 일관성, 고립성, 지속성의 성질을 갖는다.
### 원자성(Atomicity)
트랜잭션에 포함된 작업은 전부 수행되거나 아니면 전부 수행되지 않아야한다.(All or Nothing)
### 일관성(Consistenty)
트랜잭션을 수행하기 전이나 수행한 후나 데이터베이스는 항상 일관된 상태를 유지해야 한다. 즉, DB의 제약조건을 위배하는 작업을 트랜잭션 과정에서 수행할 수 없음을 나타낸다.

ex)송금 시 금액의 데이터 타입을 정수형에서 문자형으로 변경할 수 없다.
### 독립성(Isolation)
트랜잭션 수행 시 다른 트랜잭션의 작업이 끼어들지 못하도록 보장해야 한다. 즉, 둘 이상의 트랜잭션이 동시에 병행 실행되고 있을 때, 어떤 트랜잭션도 다른 트랜잭션 연상에 끼어들 수 없다.

독립성을 유지하기 위해서는 변경 중인 데이터를 다른 트랜잭션이 읽거나 쓰려할 때 제어하는 작업이 필요하다. 이 작업을 동시성 제어라고 한다.
### 지속성(Durability)
트랜잭션이 성공적으로 완료되었으면, 변경된 데이터는 영구적으로 저장되어야 한다. 저장된 데이터베이스는 저장 직후 혹은 어느 때나 발생할 수 있는 정전,장애,오류에 영향을 받지 않아야 한다.
