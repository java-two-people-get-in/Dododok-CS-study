# 페이징

## 단일 프로그래밍

한 번에 하나의 프로세스만이 메모리에 적재되고 실행이 종료되면, 다음 프로세스가 적재되는 시스템

- 오버레이(Overlay) 방식
    - 메모리의 크기가 적재할 프로그램의 크기보다 작을 때, 프로그램의 일부분만을 먼저 적재해 실행한 다음, 나머지 부분들을 다시 적재하여 실행을 이어나가는 방식
- 메모리 및 CPU 등의 자원 낭비 발생 → 시스템 성능 매우 떨어트림

<br/><br/>

## 고정 분할에서의 다중 프로그래밍

메모리를 여러 개의 분할로 나누어 놓고, 각 분할에는 하나의 프로세스만을 수용하도록 함으로써 다중 프로그래밍을 구현하는 방식

- 이미 정해진 분할은 고정. 크기, 개수 변화 X
    - 다중 프로그래밍의 최대치 = 분할의 개수
- [장점] 관리가 쉽고 편함
- [단점] 유연한 대처가 어려움
    - 분할의 크기를 다양하게 하면 유연성(Flexibility)을 높일 수 있지만, 이는 복잡도(Complexity)를 동반함
- 재배치(Relocatable) 번역과 로더를 사용
    - 비어있는 어느 분할로도 들어갈 수 있도록 해 주어 메모리의 낭비를 줄임
- [문제점]
    - 가장 큰 분할보다 더 큰 프로그램의 수행 → 오버레이 방식
    - 메모리 단편화(Fragmentation) === 내부(Internal) 단편화
        - 분할 내 프로세스를 수용하고 남는 공간의 발생
        - 외부(External) 단편화?
        : 분할의 크기가 너무 작아 프로세스들을 수용하지 못하고 낭비되는 것

![image](https://github.com/java-two-people-get-in/Dododok-CS-study/assets/102593738/71517e6d-751b-48f8-afcf-cdae1f70ccc9)

<br/><br/>

## 가상 메모리

모든 프로그램은 작은 조각들로 나누어진다.

- 조각들의 크기를 같게 하면 → 각각의 **페이지 (Page)**
- 서로 다르게 하면 → 각각의 **세그먼트 (Segment)**

⇒ 이 크기는 메모리와 디스크 사이에서 한 번에 전송되는 단위가 됨 (= 블록 (Block))

<br/>

### 사상(Mapping)

주소가 실제 메모리에 있는 주소와 달라서, 메모리상의 주소로 변환하는 것

- 가상주소(Virtual Address): 프로그램에서 참조하는 주소
- 실주소(Real Address): 실제 메모리상의 주소
  
![image](https://github.com/java-two-people-get-in/Dododok-CS-study/assets/102593738/49485daa-0a4c-4d2e-bf43-68f62bffab1a)

<br/>

---

<br/>

## 페이징(Paging)

- 외부 단편화의 해결방법
- 페이징을 위해서는 모든 프로세스들이 같은 크기의 조각들로 나뉘어야 하는데, 이때 한 조각을 페이지라고 함
- 메모리 역시 프레임(Frame)이라 불리는, 페이지와 같은 크기로 나누어져 있으며 일련의 번호가 매겨져 있음

![image](https://github.com/java-two-people-get-in/Dododok-CS-study/assets/102593738/8cd2cf55-e2c8-4cc9-97a8-bb950103130d)

<br/><br/>

## **페이지 테이블(Page Table)**

**페이지 테이블이란 물리 주소(physical address)의 페이지를 실제 물리 주소 정보와 매핑한 표를 담고 있는 테이블**이다. <br/>
페이지 테이블은 CPU의 PCB(Process Control Block)에 저장된다.

- 운영체제는 가상주소를 실주소로 변환하기 위해 프로세스당 하나의 페이지 테이블을 만들어 둠
- 테이블의 크기는 해당 프로세스의 페이지 개수에 비래
- 한 프로세스에서 나뉘는 페이지들은 일련 번호를 가지는데 페이지 테이블은 이 번호 순서대로 엔트리를 배치
- 테이블에서 첫 번째 엔트리는 프로세스 첫 번째 페이지를 위한 사상 정보를 가짐
- 존재비트: 이 페이지가 메모리에 적재되어 있는가를 나타내며 엔트리에 들어있음

![image](https://github.com/java-two-people-get-in/Dododok-CS-study/assets/102593738/9bd35675-c743-44bd-9443-8c5fda0cd746)

<br/>

## 오프셋(Offset)

“위치를 찾기 위해 더해주는 값”

![image](https://github.com/java-two-people-get-in/Dododok-CS-study/assets/102593738/0fd44122-e695-4545-82e1-a5a36927e5de)

- 현재 주소 = (페이지 * 페이지 크기) + offset
